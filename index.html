<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Portugal Luxury Family Road Trip</title>

    <!-- Leaflet -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap");

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
        background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
        color: #e2e8f0;
        min-height: 100vh;
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
      }

      .container {
        max-width: 1200px;
        margin: 28px auto;
        padding: 20px;
      }

      .header {
        text-align: center;
        margin-bottom: 36px;
        position: relative;
      }

      .header::before {
        content: "";
        position: absolute;
        top: -18px;
        left: 50%;
        transform: translateX(-50%);
        width: 90px;
        height: 4px;
        border-radius: 3px;
        background: linear-gradient(90deg, #06b6d4, #3b82f6, #8b5cf6);
      }

      .header h1 {
        font-size: clamp(1.8rem, 4vw, 3rem);
        font-weight: 800;
        background: linear-gradient(135deg, #06b6d4, #3b82f6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 8px;
      }

      .header p {
        color: #94a3b8;
        font-weight: 500;
      }

      .trip-overview {
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 26px;
      }

      .overview-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 14px;
      }

      .overview-card {
        padding: 16px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.06);
      }

      .overview-card h3 {
        font-size: 1rem;
        color: #e6f6fb;
        margin-bottom: 6px;
      }

      .overview-card p {
        color: #bfcfe0;
        font-size: 0.95rem;
      }

      .day-selector {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
        margin-bottom: 26px;
      }

      .day-btn {
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.08);
        padding: 10px 16px;
        border-radius: 10px;
        cursor: pointer;
        color: #e2e8f0;
        font-weight: 600;
      }

      .day-btn.active {
        background: linear-gradient(135deg, #06b6d4, #3b82f6);
        color: #fff;
        border-color: transparent;
        box-shadow: 0 8px 24px rgba(59, 130, 246, 0.18);
      }

      .content-grid {
        display: grid;
        grid-template-columns: 1fr 380px;
        gap: 26px;
        align-items: start;
      }

      .day-content {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 16px;
        padding: 22px;
        border: 1px solid rgba(255, 255, 255, 0.06);
      }

      .map-container {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 16px;
        padding: 18px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        position: sticky;
        top: 20px;
      }

      #map {
        height: 420px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.06);
      }

      .day-header {
        display: flex;
        gap: 18px;
        align-items: center;
        margin-bottom: 18px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.04);
        padding-bottom: 14px;
      }

      .day-number {
        width: 58px;
        height: 58px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        font-size: 1.25rem;
        color: #fff;
        background: linear-gradient(135deg, #06b6d4, #3b82f6);
        box-shadow: 0 12px 30px rgba(59, 130, 246, 0.12);
      }

      .day-info h2 {
        font-size: 1.3rem;
        color: #fff;
        margin-bottom: 4px;
      }

      .day-info p {
        color: #94a3b8;
      }

      .route-info {
        margin: 14px 0;
        padding: 12px;
        border-radius: 10px;
        background: rgba(6, 182, 212, 0.05);
        border: 1px solid rgba(6, 182, 212, 0.12);
      }

      .section {
        margin-bottom: 18px;
      }

      .section h3 {
        font-size: 1.05rem;
        margin-bottom: 10px;
        color: #f1f5f9;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* highlighted small gold header for Luxury Moment */
      .luxury-moment {
        background: rgba(212, 175, 55, 0.06);
        border-left: 4px solid #d4af37;
        padding: 12px;
        border-radius: 8px;
        color: #fff8e6;
      }

      .highlight-item {
        background: rgba(245, 158, 11, 0.06);
        border-left: 4px solid #f59e0b;
        padding: 10px;
        border-radius: 8px;
      }

      .accommodation {
        background: rgba(34, 197, 94, 0.04);
        border-radius: 10px;
        padding: 14px;
        border: 1px solid rgba(34, 197, 94, 0.06);
      }

      .hotel-options {
        display: grid;
        gap: 10px;
      }

      .hotel-option {
        display: block;
        text-decoration: none;
        background: rgba(255, 255, 255, 0.03);
        padding: 12px;
        border-radius: 8px;
        border: 1px solid rgba(255, 255, 255, 0.04);
        transition: transform 0.18s ease, background 0.18s ease;
      }

      .hotel-option:hover {
        transform: translateY(-4px);
        background: rgba(255, 255, 255, 0.05);
      }

      .hotel-option h5 {
        color: #34d399;
        margin-bottom: 6px;
      }

      .hotel-option p {
        color: #cbd5e1;
        margin: 0;
        font-size: 0.94rem;
      }

      .family-highlights ul,
      .exclusive-experiences ul,
      .suggested-schedule ul {
        list-style: none;
        padding-left: 0;
      }

      .family-highlights li,
      .exclusive-experiences li,
      .suggested-schedule li {
        padding: 8px 0;
        color: #e2e8f0;
        border-bottom: 1px dashed rgba(255, 255, 255, 0.03);
      }

      .rocket-note {
        margin-top: 12px;
        padding: 10px 14px;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.03);
        border-left: 4px solid #d4af37;
        color: #fff8e6;
        font-style: italic;
      }

      .day-gallery {
        display: flex;
        gap: 10px;
        margin-top: 12px;
        overflow-x: auto;
      }

      .day-gallery img {
        width: 210px;
        height: 120px;
        object-fit: cover;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.06);
      }

      .map-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: white;
        padding: 8px 12px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
      }

      /* responsive */
      @media (max-width: 1024px) {
        .content-grid {
          grid-template-columns: 1fr;
        }
        .map-container {
          position: static;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="header">
        <h1>Family Luxury Road Trip ‚Äî Portugal</h1>
        <p>October 25‚Äì30, 2025 ‚Ä¢ Lisbon ‚Üí Nazar√© ‚Üí Aveiro ‚Üí Porto ‚Üí Douro ‚Üí Serra da Estrela ‚Üí Alentejo ‚Üí Lisbon</p>
      </div>

      <div class="trip-overview">
        <div class="overview-grid">
          <div class="overview-card">
            <h3>üó∫Ô∏è Route</h3>
            <p>LISBON ‚Üí NAZAR√â ‚Üí AVEIRO ‚Üí PORTO ‚Üí DOURO VALLEY ‚Üí SERRA DA ESTRELA ‚Üí ALENTEJO ‚Üí LISBON</p>
          </div>
          <div class="overview-card">
            <h3>üë®‚Äçüë©‚Äçüëß Travel Style</h3>
            <p>Luxury family ‚Äî suites, private experiences, short scenic drives, kid-friendly activities</p>
          </div>
          <div class="overview-card">
            <h3>üìÖ Duration</h3>
            <p>6 days, 5 nights ‚Äî total driving: ~12 hours (relaxed pace)</p>
          </div>
        </div>
      </div>

      <div class="day-selector" id="day-selector"></div>

      <div class="content-grid">
        <div class="day-content" id="day-content"></div>

        <aside class="map-container">
          <h3>üìç Interactive Route Map</h3>
          <div id="map"></div>

          <div style="margin-top:12px">
            <div style="font-weight:600;color:#cbd5e1;margin-bottom:8px">Legend</div>
            <div style="display:flex;gap:10px;align-items:center;margin-bottom:6px">
              <div style="width:12px;height:12px;border-radius:50%;background:#ef4444"></div>
              <div style="color:#bfcfe0">Start/End</div>
            </div>
            <div style="display:flex;gap:10px;align-items:center;margin-bottom:6px">
              <div style="width:12px;height:12px;border-radius:50%;background:#3b82f6"></div>
              <div style="color:#bfcfe0">Attractions</div>
            </div>
            <div style="display:flex;gap:10px;align-items:center">
              <div style="width:12px;height:12px;border-radius:50%;background:#10b981"></div>
              <div style="color:#bfcfe0">Accommodations</div>
            </div>
          </div>
        </aside>
      </div>
    </div>

    <script>
      /***********************
       * Map initialization
       ***********************/
      let map;
      let tileLayer;
      let activeMarkers = []; // circle markers for current day
      let activePolyline = null;

      function initMap() {
        map = L.map("map").setView([39.5, -8.0], 7);
        tileLayer = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          attribution: "¬© OpenStreetMap contributors",
        });
        tileLayer.addTo(map);
      }

      /***********************
       * Locations (coords)
       ***********************/
      const locations = {
        lisbon: [38.7223, -9.1393],
        nazare: [39.6017, -9.0708],
        aveiro: [40.6443, -8.6455],
        porto: [41.1579, -8.6291],
        douro: [41.1621, -7.7871],
        serra: [40.3947, -7.6204],
        alentejo: [38.4431, -7.3806],
        evora: [38.5664, -7.9077],
      };

      /***********************
       * Enriched dayData
       * (keeps your original content + new luxury/family fields)
       ***********************/
      const dayData = {
        1: {
          title: "Lisbon ‚Üí Nazar√© ‚Üí Aveiro ‚Üí Porto",
          date: "Saturday, Oct 25",
          route: {
            description:
              "Lisbon ‚Üí Nazar√© (1h15) ‚Üí Aveiro (1h) ‚Üí Porto (1h) ‚Äî total ~3h driving (scenic coastal + estuarine stops).",
            mapLink: "https://www.google.com/maps/dir/Lisbon/Nazar%C3%A9/Aveiro/Porto",
          },
          highlights: [
            {
              title: "Praia da Nazar√© & Miradouro do Suberco",
              description:
                "Witness the legendary surf waves and panoramic cliff views.",
              mapLink: "https://maps.app.goo.gl/3iB6Ko8odcw5q4Gg6",
            },
            {
              title: "Costa Nova (Aveiro)",
              description:
                "Colorful striped fishermen houses ‚Äî great for family photos.",
              mapLink: "https://maps.app.goo.gl/BmruEP8HPDrh3wxz5",
            },
            {
              title: "Moliceiro boat ride (Aveiro)",
              description: "Relaxing 30‚Äì45min canal tour with commentary.",
              mapLink: "https://maps.app.goo.gl/F7vjYCqTzkoAxTJR7",
            },
          ],
          accommodation: {
            title: "Porto Accommodation (Oct 25‚Äì27)",
            options: [
              {
                name: "The Yeatman Hotel ‚Äî 5‚≠ê",
                details:
                  "Panoramic suites, Michelin 2-star restaurant, sweeping Douro views.",
                link: "https://www.the-yeatman-hotel.com/",
              },
              {
                name: "The Rebello Hotel ‚Äî 5‚≠ê",
                details:
                  "Chic suites with rooftop pool and family-friendly facilities.",
                link: "https://www.therebello.com/",
              },
              {
                name: "Maison Albar - Le Monumental Palace ‚Äî 5‚≠ê",
                details: "Historic luxury in the city center with refined dining.",
                link:
                  "https://www.maisonalbar.com/en/hotel/le-monumental-palace-porto/",
              },
            ],
          },
          familyHighlights: [
            "Spacious family suites with river views (kids sleep comfortably).",
            "Short driving segments ‚Äî minimal transit fatigue for kids.",
            "Kid-friendly dining options near Ribeira waterfront.",
          ],
          luxuryMoment:
            "Private rooftop dinner or a Michelin tasting at The Yeatman ‚Äî perfect for a family celebration.",
          exclusiveExperiences: [
            "Private moliceiro boat just for the family (book ahead).",
            "Priority seating at a Michelin tasting menu (reserve in advance).",
          ],
          suggestedSchedule: {
            morning: ["08:30 ‚Äî Depart Lisbon", "10:00 ‚Äî Nazar√© miradouro & beach walk"],
            afternoon: [
              "13:00 ‚Äî Lunch in Aveiro (riverside)",
              "15:00 ‚Äî Moliceiro boat ride & transfer to Porto",
            ],
            evening: ["19:00 ‚Äî Check-in & dinner at hotel restaurant"],
          },
          rocketNote:
            "MrR0cket‚Äôs Tip: Bring a light windbreaker for Nazar√© ‚Äî coastal wind is real but views are cinematic.",
          mapPoints: ["lisbon", "nazare", "aveiro", "porto"],
          images: [
            // optional: add your hosted images (or remove if you don't want gallery)
            // "https://images.unsplash.com/photo-1526772662000-3f88f10405ff?w=1200",
          ],
        },

        2: {
          title: "Explore Porto",
          date: "Sunday, Oct 26",
          route: {
            description: "Full relaxed day in Porto ‚Äî city walking, viewpoints and rooftop cocktails.",
            mapLink: "https://www.google.com/maps/place/Porto,+Portugal",
          },
          highlights: [
            {
              title: "Livraria Lello & Cl√©rigos",
              description:
                "Iconic bookstore and baroque tower ‚Äî great early morning to avoid crowds.",
              mapLink: "https://maps.google.com/?q=Livraria+Lello+Porto",
            },
            {
              title: "Street Art & Vintage Cinema Tour",
              description:
                "Explore hidden murals and historic cinemas ‚Äî fun for teens and curious kids.",
              mapLink: "https://maps.app.goo.gl/XLSpjNj4gMGWrhxU8",
            },
            {
              title: "Neonia Museum",
              description: "Interactive neon installations ‚Äî visually captivating for the whole family.",
              mapLink: "https://maps.google.com/?q=Neonia+Museum+Porto",
            },
          ],
          accommodation: {
            title: "Stay in Porto (same as last night)",
            options: [
              {
                name: "The Rebello Hotel ‚Äî Rooftop",
                details: "Sunset rooftop for family cocktails and views.",
                link: "https://www.therebello.com/",
              },
            ],
          },
          familyHighlights: [
            "Short walking distances between key sights.",
            "Caf√©s with high chairs and family menus (Combi Roasters, 7G).",
            "Accessible elevator routes around the Ribeira area for strollers.",
          ],
          luxuryMoment:
            "Sunset at The Rebello rooftop with cocktails and private table for family photos.",
          exclusiveExperiences: [
            "Private guided street art tour tailored for families.",
            "After-hours access to a small gallery or cinema (arranged ahead).",
          ],
          suggestedSchedule: {
            morning: ["09:00 ‚Äî Breakfast & street art walk", "11:00 ‚Äî Livraria Lello (early slot)"],
            afternoon: ["13:00 ‚Äî Lunch at Cantina 32", "15:00 ‚Äî Neonia Interactive visit"],
            evening: ["18:00 ‚Äî Rooftop drinks & sunset at The Rebello", "20:00 ‚Äî Optional Michelin dinner"],
          },
          rocketNote:
            "MrR0cket‚Äôs Tip: Book Livraria Lello timed entry early ‚Äî do the rooftop later for sunset.",
          mapPoints: ["porto"],
        },

        3: {
          title: "Porto ‚Üí Douro Valley",
          date: "Monday, Oct 27",
          route: {
            description:
              "Porto ‚Üí Peso da R√©gua ‚Üí Pinh√£o ‚Äî ~120 km scenic drive (~1h40) via A4 ‚Äî vineyard-lined roads.",
            mapLink: "https://www.google.com/maps/dir/Porto/Peso+da+R%C3%A9gua/Pinh%C3%A3o",
          },
          highlights: [
            {
              title: "Peso da R√©gua Viewpoint",
              description: "Short photo stop and stretch legs before Pinh√£o.",
              mapLink: "https://maps.app.goo.gl/Qm6Ns1R4P38nhyj96",
            },
            {
              title: "Private Douro River Cruise",
              description: "2-hour private cruise with light lunch ‚Äî family friendly.",
              mapLink: "https://maps.google.com/?q=Pinhao+Douro+River+Portugal",
            },
          ],
          accommodation: {
            title: "Douro Valley Accommodation (Oct 27‚Äì28)",
            options: [
              {
                name: "Six Senses Douro Valley",
                details: "Two-bedroom villas, organic spa and family programs.",
                link: "https://www.sixsenses.com/en/resorts/douro-valley",
              },
            ],
          },
          familyHighlights: [
            "Private villa options with pool and kid-friendly menus.",
            "Short on-site activities for kids (movie night, pool).",
            "Guided vineyard visits with non-alcoholic tastings for children.",
          ],
          luxuryMoment:
            "Private sunset cruise on Douro with chef-prepared picnic ‚Äî unforgettable family moment.",
          exclusiveExperiences: [
            "Chef‚Äôs table for the family at the resort.",
            "Private grape-juice tasting & kids‚Äô grape stomp (seasonal).",
          ],
          suggestedSchedule: {
            morning: ["10:00 ‚Äî Depart Porto", "11:30 ‚Äî Peso da R√©gua viewpoint stop"],
            afternoon: ["14:00 ‚Äî Check-in at Six Senses", "16:00 ‚Äî Private river cruise"],
            evening: ["19:30 ‚Äî Dinner at Six Senses ‚Äî family menu available"],
          },
          rocketNote:
            "MrR0cket‚Äôs Tip: Reserve the family river cruise and a chef‚Äôs-table slot well in advance for peak weekends.",
          mapPoints: ["porto", "douro"],
        },

        4: {
          title: "Douro Valley ‚Üí Serra da Estrela",
          date: "Tuesday, Oct 28",
          route: {
            description:
              "Douro Valley ‚Üí Peso da R√©gua ‚Üí Belmonte ‚Üí Manteigas ‚Äî mountain route (~3h).",
            mapLink: "https://www.google.com/maps/dir/Douro+Valley/Belmonte/Manteigas",
          },
          highlights: [
            {
              title: "Belmonte Village",
              description: "Medieval streets and unobstructed panoramic photo spots.",
              mapLink: "https://maps.google.com/?q=Belmonte+Portugal",
            },
            {
              title: "Cov√£o dos Conchos",
              description: "Iconic artificial lake ‚Äî dramatic nature stop.",
              mapLink: "https://maps.app.goo.gl/c159vP9fMmLBzfCY9",
            },
          ],
          accommodation: {
            title: "Serra da Estrela Accommodation (Oct 28‚Äì29)",
            options: [
              {
                name: "Casa das Penhas Douradas",
                details: "Cozy eco-lodge with mountain balcony and spa.",
                link: "https://www.penhasdouradas.com/",
              },
            ],
          },
          familyHighlights: [
            "Mountain-side rooms with private balconies.",
            "Short family-friendly hikes and picnic-ready spaces.",
            "Indoor pool & fireplace options for chill evenings.",
          ],
          luxuryMoment:
            "Private guided family hike to a hidden viewpoint followed by a picnic prepared by the lodge chef.",
          exclusiveExperiences: [
            "Private evening telescope stargazing (local guide).",
            "Guided family nature walk with educator.",
          ],
          suggestedSchedule: {
            morning: ["09:30 ‚Äî Scenic drive through Peso da R√©gua", "12:30 ‚Äî Lunch stop"],
            afternoon: ["15:00 ‚Äî Check-in & family hike", "17:30 ‚Äî Picnic at viewpoint"],
            evening: ["20:00 ‚Äî Lodge dinner & board games by the fireplace"],
          },
          rocketNote:
            "MrR0cket‚Äôs Tip: Pack a small first-aid kit and layered clothing for mountain microclimates.",
          mapPoints: ["douro", "serra"],
        },

        5: {
          title: "Serra da Estrela ‚Üí Alentejo (Monsaraz)",
          date: "Wednesday, Oct 29",
          route: {
            description: "Serra da Estrela ‚Üí Monsaraz (Alentejo) ‚Äî ~3h30 drive, countryside & hilltop village.",
            mapLink: "https://www.google.com/maps/dir/Serra+da+Estrela/Monsaraz",
          },
          highlights: [
            {
              title: "Monsaraz Medieval Village",
              description: "Castle sunset views and narrow whitewashed streets.",
              mapLink: "https://maps.google.com/?q=Monsaraz+Portugal",
            },
            {
              title: "Alqueva Dark Sky Reserve",
              description: "Stargazing in one of Europe‚Äôs best dark-sky areas.",
              mapLink: "https://maps.google.com/?q=Alqueva+Dark+Sky+Reserve+Portugal",
            },
          ],
          accommodation: {
            title: "Alentejo Accommodation (Oct 29‚Äì30)",
            options: [
              {
                name: "S√£o Louren√ßo do Barrocal",
                details:
                  "Meadow cottages, family activities, farm-to-table dining and spa.",
                link: "https://www.barrocal.pt/en/",
              },
            ],
          },
          familyHighlights: [
            "Large cottages with private outdoor spaces for kids to play.",
            "Farm breakfasts, bikes, and gentle family excursions.",
            "Evening stargazing activities ‚Äî magical for children.",
          ],
          luxuryMoment:
            "Private alfresco dinner under the stars with a local sommelier (non-alcoholic options for kids).",
          exclusiveExperiences: [
            "Private horseback ride through vineyards at sunset.",
            "Guided star-gazing with expert ‚Äî family-friendly scope & narration.",
          ],
          suggestedSchedule: {
            morning: ["10:00 ‚Äî Leisurely morning & drive to Monsaraz", "13:00 ‚Äî Lunch and village walk"],
            afternoon: ["16:00 ‚Äî Check-in & pool time", "18:30 ‚Äî Sunset horseback ride"],
            evening: ["21:00 ‚Äî Stargazing & family dessert al fresco"],
          },
          rocketNote:
            "MrR0cket‚Äôs Tip: Bring a small blanket for the kids for stargazing nights ‚Äî it makes everything cozier.",
          mapPoints: ["serra", "alentejo"],
        },

        6: {
          title: "Alentejo ‚Üí Lisbon (Return)",
          date: "Thursday, Oct 30",
          route: {
            description: "Short return to Lisbon ‚Äî optional stop in √âvora for Roman sights (~2h30 drive).",
            mapLink: "https://www.google.com/maps/dir/Monsaraz/%C3%89vora/Lisbon",
          },
          highlights: [
            {
              title: "√âvora (Optional Stop)",
              description: "Roman Temple, Chapel of Bones ‚Äî a unique historical stop for the family.",
              mapLink: "https://maps.google.com/?q=Evora+Portugal",
            },
          ],
          activities: {
            morning: ["Farm breakfast & pottery/tile workshop (family-friendly)"],
            afternoon: ["Optional stop in √âvora", "Arrive in Lisbon and end of trip"],
          },
          familyHighlights: [
            "Relaxed final day with optional cultural stop.",
            "Easy airport/return logistics from Lisbon.",
          ],
          luxuryMoment:
            "Private farewell lunch at a curated Alentejo estate before the drive back to Lisbon.",
          exclusiveExperiences: [
            "Short private walking tour in √âvora with skip-the-line access.",
          ],
          suggestedSchedule: {
            morning: ["09:00 ‚Äî Farm breakfast & activity", "11:00 ‚Äî Depart for √âvora"],
            afternoon: ["14:00 ‚Äî Lunch in √âvora (if stopping)", "16:30 ‚Äî Arrive Lisbon"],
          },
          rocketNote:
            "MrR0cket‚Äôs Tip: If you have a late flight, request a late checkout at the Barrocal for a relaxed final day.",
          mapPoints: ["alentejo", "evora", "lisbon"],
        },
      };

      /***********************
       * UI rendering helpers
       ***********************/
      function createDayButtons() {
        const container = document.getElementById("day-selector");
        container.innerHTML = "";
        Object.keys(dayData).forEach((num) => {
          const btn = document.createElement("button");
          btn.className = "day-btn";
          btn.textContent = `Day ${num} - ${dayData[num].date.replace(",", "")}`;
          btn.addEventListener("click", () => showDay(Number(num)));
          container.appendChild(btn);
        });
      }

      function safeJoin(list) {
        return (list || []).join(" ‚Äî ");
      }

      /***********************
       * Map helpers
       ***********************/
      function clearActiveMapLayers() {
        // remove active markers
        activeMarkers.forEach((m) => {
          if (map && map.hasLayer(m)) map.removeLayer(m);
        });
        activeMarkers = [];

        // remove active polyline
        if (activePolyline && map && map.hasLayer(activePolyline)) {
          map.removeLayer(activePolyline);
        }
        activePolyline = null;
      }

      function updateMap(points) {
        clearActiveMapLayers();
        if (!points || points.length === 0) return;

        const routeCoords = [];
        const colors = {
          lisbon: "#ef4444",
          nazare: "#3b82f6",
          aveiro: "#3b82f6",
          porto: "#10b981",
          douro: "#10b981",
          serra: "#10b981",
          alentejo: "#10b981",
          evora: "#f59e0b",
        };

        const names = {
          lisbon: "Lisbon",
          nazare: "Nazar√©",
          aveiro: "Aveiro",
          porto: "Porto",
          douro: "Douro Valley",
          serra: "Serra da Estrela",
          alentejo: "Alentejo (Monsaraz)",
          evora: "√âvora",
        };

        points.forEach((point, idx) => {
          const coord = locations[point];
          if (!coord) return;
          routeCoords.push(coord);

          const marker = L.circleMarker(coord, {
            color: colors[point] || "#3b82f6",
            fillColor: colors[point] || "#3b82f6",
            fillOpacity: 0.85,
            radius: 8,
            weight: 2,
          }).addTo(map);

          marker.bindPopup(`<strong>${names[point] || point}</strong><br>Stop ${idx + 1}`);
          activeMarkers.push(marker);
        });

        if (routeCoords.length > 1) {
          activePolyline = L.polyline(routeCoords, {
            color: "#667eea",
            weight: 3,
            opacity: 0.8,
            dashArray: "8,6",
          }).addTo(map);
        }

        // fit bounds to active markers
        if (activeMarkers.length > 0) {
          const group = L.featureGroup(activeMarkers);
          map.fitBounds(group.getBounds().pad(0.15));
        }
      }

      /***********************
       * showDay: main renderer
       ***********************/
      function showDay(dayNum) {
        const day = dayData[dayNum];
        if (!day) return;

        // active button
        document.querySelectorAll(".day-btn").forEach((b) => b.classList.remove("active"));
        const allBtns = Array.from(document.querySelectorAll(".day-btn"));
        const targetBtn = allBtns[dayNum - 1];
        if (targetBtn) targetBtn.classList.add("active");

        // build HTML
        const content = document.getElementById("day-content");
        let html = "";

        html += `
          <div class="day-header">
            <div class="day-number">${dayNum}</div>
            <div class="day-info">
              <h2>${day.title}</h2>
              <p>${day.date}</p>
            </div>
          </div>
        `;

        // route block (object)
        if (day.route) {
          html += `
            <div class="route-info">
              <strong>üó∫Ô∏è Route</strong>
              <div style="margin-top:8px;color:#cbd5e1">${day.route.description || ""}</div>
              ${day.route.mapLink ? `<div style="margin-top:10px"><a class="map-link" href="${day.route.mapLink}" target="_blank" rel="noopener noreferrer">View Route</a></div>` : ""}
            </div>
          `;
        }

        // highlights
        if (day.highlights && day.highlights.length) {
          html += `<div class="section"><h3>üåü Highlights</h3>`;
          day.highlights.forEach((h) => {
            html += `
              <div class="highlight-item" style="margin-bottom:10px">
                <h4 style="margin:0 0 8px 0;color:#fbbf24">${h.title}</h4>
                <p style="margin:0 0 8px 0;color:#dbe6f0">${h.description}</p>
                ${h.mapLink ? `<a class="map-link" href="${h.mapLink}" target="_blank" rel="noopener noreferrer">üìç View on Map</a>` : ""}
              </div>
            `;
          });
          html += `</div>`;
        }

        // images (optional gallery)
        if (day.images && day.images.length) {
          html += `<div class="section"><h3>üì∏ Day Gallery</h3><div class="day-gallery">`;
          day.images.forEach((src) => {
            html += `<img src="${src}" alt="gallery">`;
          });
          html += `</div></div>`;
        }

        // accommodation
        if (day.accommodation) {
          html += `
            <div class="section">
              <h3>üè® Accommodation</h3>
              <div class="accommodation">
                <h4 style="margin-bottom:10px">${day.accommodation.title || ""}</h4>
                <div class="hotel-options">
          `;
          day.accommodation.options.forEach((hotel) => {
            html += `
              <a class="hotel-option" href="${hotel.link || "#"}" target="_blank" rel="noopener noreferrer">
                <h5 style="margin:0">${hotel.name}</h5>
                <p>${hotel.details || ""}</p>
              </a>
            `;
          });
          html += `</div></div></div>`;
        }

        // family highlights (if present)
        if (day.familyHighlights && day.familyHighlights.length) {
          html += `
            <div class="section family-highlights">
              <h3>üë®‚Äçüë©‚Äçüëß Family Highlights</h3>
              <ul>
                ${day.familyHighlights.map((i) => `<li>${i}</li>`).join("")}
              </ul>
            </div>
          `;
        }

        // luxury moment
        if (day.luxuryMoment) {
          html += `
            <div class="section luxury-moment">
              <h3>‚ú® Luxury Moment</h3>
              <div style="margin-top:6px">${day.luxuryMoment}</div>
            </div>
          `;
        }

        // exclusive experiences
        if (day.exclusiveExperiences && day.exclusiveExperiences.length) {
          html += `
            <div class="section exclusive-experiences">
              <h3>üîí Exclusive Experiences</h3>
              <ul>
                ${day.exclusiveExperiences.map((i) => `<li>${i}</li>`).join("")}
              </ul>
            </div>
          `;
        }

        // suggested schedule (if present)
        if (day.suggestedSchedule) {
          html += `
            <div class="section suggested-schedule">
              <h3>üï∞Ô∏è Suggested Schedule</h3>
              ${Object.entries(day.suggestedSchedule)
                .map(
                  ([t, items]) => `
                  <div style="margin-bottom:8px">
                    <strong style="color:#aab8cf">${t.charAt(0).toUpperCase() + t.slice(1)}</strong>
                    <ul>
                      ${items.map((it) => `<li>${it}</li>`).join("")}
                    </ul>
                  </div>
                `
                )
                .join("")}
            </div>
          `;
        }

        // rocket note
        if (day.rocketNote) {
          html += `<div class="rocket-note">${day.rocketNote}</div>`;
        }

        content.innerHTML = html;

        // update map
        updateMap(day.mapPoints || []);
      }

      // Initialize UI + map on DOMContentLoaded
      document.addEventListener("DOMContentLoaded", () => {
        initMap();
        createDayButtons();
        // show first day by default
        showDay(1);
      });
    </script>
  </body>
</html>
